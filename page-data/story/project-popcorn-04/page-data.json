{"componentChunkName":"component---src-templates-blog-template-js","path":"/story/project-popcorn-04/","result":{"data":{"cur":{"id":"2d0db7ec-3220-510a-92e8-831bd7f44edf","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADO0lEQVR42m2QX0xbdRzFTwskDhc0xmy4qHvYoj6Z+YBzGgNhOiFd2eZSaGlvRwYIZvzRWFAEApMNfNhYnApmcwsRtt723pYCjv0xc4xaGoZBcFCgveufS+vcnCYuYbHtr/e7dK/zk5y3k89JDvAYbwBZ+bhp9WfkPqMF1r0LsvQhWdG9kX3ck00/HUHS9/UryV9qa//r3ZTJPsgH7cmHwhU+ymNsfkGn3rChBECeZX3Oe1eAt56ljrPr/tnb3v6vvqNJcXaBlls+SoyU0N8dyFZ0u15UKguf+l9hT+MQ9hGhufvSE3X6E3+e6XSS2HvlU2/LD7hb2mW6V9S0L91z9w/OLQ121v/sOo0EV/glMxbsZcYCMGOBGhXOGA44ojAJEVWVEMnQiWE02mMIiPL+ST54Y1EIvX6qfwZxzed5BKDfHtSPf/cbea1rb9NWPPegrPDNeEPxk8m6IiQqdwIGXkI5f0vFiavgRBmcIL9qFELHtUNL1/L63KvFA/MTB52xOu2g/2luaPk1kyBTlRi5SdebQcvd69MjqR8bkBprUKWsNYDeGlCVnVuB2RHdaBIi33CizAxCjMyiTBwvkZGXiBPCxIlyzGAL+sxihN63/3GU/GVb2EKrX1ls/Z2koy+RdATKSqcKm9tOIbf5ZGa5LTjDiatUzktKo302YRbCTC9Ek2ZbMK63+hWD7VZaSmYhNEX3AZrIyLp9YltOat5SpQQO80rgC5DUpUazh1QWN8FoD42aHTLtt4bjromr5Pv1olLn8FG5LUKG8yvDmoG50gpBshAB5G/awXztlxVfa7/ia/MqCy31iq8NylKbOv2hWm8NgBOjL1eIkajWdpu6HavJ1PQ4nRlxXNvN/3WsZ2w+Z/v3Ms5fdYEWLTuSs5/0pTzVRWyqpoR5qt8hIqwdex7x4WJAN7QE4YKY4Ry3YWG0QzvrHaM51yzdOD0zMD4cgsYqgRu9gwabO4vuAmuTtZvY9QO5qelDYN5asKkapIUPvtqC+IgGMIkRgAimaVJ/do9AE2U7E5fqv42da8ymXh0O855MgxBWuS6exf3JQyrmrkRy8iCY98NM5q5UM0+1Ou7SID6yG4nLpXgIO2TKywhevHIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insight_boy.png\"\n        title=\"\"\n        src=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png\"\n        srcset=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/e9ff0/insight_boy.png 180w,\n/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"-4주차-회고\" style=\"position:relative;\"><a href=\"#-4%EC%A3%BC%EC%B0%A8-%ED%9A%8C%EA%B3%A0\" aria-label=\" 4주차 회고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 4주차 회고</h2>\n<p>4주차에는 영화 페이지를 구현했다.<br>\n로그인 시에 메인이 될 화면이고 분류에 맞는 영화를 앨범형 리스트로 만들어야했다.</p>\n<h3 id=\"1-did\" style=\"position:relative;\"><a href=\"#1-did\" aria-label=\"1 did permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Did</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD80lEQVR42pWUfUyVZRjG3//6p7ZymOUURwpmpgsCRNZ0fH/Ix/EI8pGAB/kwCQwDZhIfpgIBkUxRShJHmoyKxswFYwRjVLhWgwYcPi0B9cRBQMfhnPcDfu19IdfmP/ls967rud/nvp7refbej7BgE5FkBVGSsYmShk8Tao2iLDI1N0ddWzPCzOxDzA9msNrEpxL9d52Ky1zCsmBFUMXuTNzVJv9d8H9DrVFPKK2gIMsKyuLSE2JPuBElrWg5p2Bb4aqRmdk5Zh8+WnaofrBJEpIsIyvKyo6L2EQZm3a36oYgygoWVUSWsdmsSJKIrCxiFRVmH1lZsEmo5gRFElkSFUSbgsViYwkYGTRiSIgjam84IcHB1F6upbX+G/Li3ibBkEl0UjElpTVcbWym9HQhvzeVcbqknLN1jQg3Kn/m1P6vKSu8wYGoi2Qcvk5d1Sf4uW2lMF7Pdvu1ZKccpCb3DNe89IQEfYkQ2oBHbC1d7S10NlUwP3iOuuoSWto6Eerzu/kooIL2Ky18lnqF0qAqzhScwGXjOo7H6nDduI6MxANU1LSSFZJDftIttgblsKf0e8yT/VwrL6Qgfh89LfWwYEK4d76Nnohs+k7mM1lYzczFJi59/CFBzo4keHvg5rSB3JR48n59yLZ3zxEdmoVv9hekdEzS/9OPJAR7Y9gfRHlOKg21lQi933WSGJpAVoSOIzFHaGmooao4H1fHV4gI16Pz9aEgNYakcz2sL/gF35hcXkv/gZCcZq5eqEAX7IurmwurVj1PoiEKobH8MsnuPhSlxbPFKZxKQz7VlVV4ePrj6h+L8249yclpfF5URlxwCrv93sfdO5OCjDyKCk+wbcsW3tj+Oq9u3kR6qgHh+qUGwrwCiAwMxHOHnlPHKyk+dRp/30hyCi4QYzjGwYwP6K5KI9/fnj07vcgKcOLbvBQOJR/i2eeewWHTBtastSNCF4owPTvHzZut1NV+xa3u37R/79PSInZ57iImKhEf3zAMR9/j7MlMdDtewNvZntCdL1KSnUByRgqBPq7sC99NSNBbhIWHLHeKOkRRRJYljR/NzMJu9RocnTaz3t6ByIhoMtKP8tJqO8K938TJ4WX0e/dz+Ng7uLs5EqP3w8PFib26MAS1Q+bnLVqoLaYOk8lEf/8AA0Yjo2NjTJnNmExTGAeHGRwa4faf45jN09y/b6K3r5/BkTFGb/+FeXoaQe1R099TzFsW6OjooLf3D010+sGMhl1dXQwODWncPP1A6/vOzk6Gh4cf52RZpr29ndHRMQT12VmwWllcXGJoeJg74+MaVx2raDQaGR+f0ITmLcu5gYEBJiYmH+fU97Cvr5/Ju/f4BxNBEqgyDhtuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"리스트.png\"\n        title=\"\"\n        src=\"/static/b653692c888d2ed1d04cfa1b8c320e46/37523/%EB%A6%AC%EC%8A%A4%ED%8A%B8.png\"\n        srcset=\"/static/b653692c888d2ed1d04cfa1b8c320e46/e9ff0/%EB%A6%AC%EC%8A%A4%ED%8A%B8.png 180w,\n/static/b653692c888d2ed1d04cfa1b8c320e46/f21e7/%EB%A6%AC%EC%8A%A4%ED%8A%B8.png 360w,\n/static/b653692c888d2ed1d04cfa1b8c320e46/37523/%EB%A6%AC%EC%8A%A4%ED%8A%B8.png 720w,\n/static/b653692c888d2ed1d04cfa1b8c320e46/e4374/%EB%A6%AC%EC%8A%A4%ED%8A%B8.png 927w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h4 id=\"-api\" style=\"position:relative;\"><a href=\"#-api\" aria-label=\" api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① API</h4>\n<p>영화 리스트 렌더링에 필요한 데이터를 위해 API 호출을 해야했다.<br>\n호출할 API 주소와 필요한 키 값들을 Config 파일을 따로 만들어 관리하기 용이하게 설정했고 동일한 데이터 응답 시간을 단축하기 위해 React-Query를 사용했다.</p>\n<h4 id=\"-react-query\" style=\"position:relative;\"><a href=\"#-react-query\" aria-label=\" react query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>② React-Query</h4>\n<p>단순히 데이터를 캐싱하여 사용하고 설정한 값들의 변경을 감지하여 재요청을 보내는 목적으로 리액트 쿼리를 사용했기 때문에 비교적 간단하게 사용할 수 있었다.<br>\nuseQuery 메소드를 사용하여 키값과 변경을 감지할 변수, 데이터를 요청하여 promise를 리턴 받을 함수, 특정 상황에 따라 사용을 하기 위한 enabled 정도로 가장 일반적인 패턴으로 구현했다.</p>\n<h4 id=\"-페이지-레이아웃-및-데이터-렌더링\" style=\"position:relative;\"><a href=\"#-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EB%B0%8F-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\" 페이지 레이아웃 및 데이터 렌더링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>③ 페이지 레이아웃 및 데이터 렌더링</h4>\n<p>Mui를 이용하여 리스트 페이지의 레이아웃을 구현했다.<br>\n정렬 카테고리 셀렉트 박스를 확정성을 고려해 Stack 컴포넌트를 이용하여 구현했고 리스트는 Grid 컴포넌트로 구현했다.<br>\n리액트 쿼리를 이용하여 응답 받은 데이터들을 props로 하위 컴포넌트에 전달하여 렌더링 하는 방식으로 구현했다.</p>\n<h4 id=\"-무한-스크롤\" style=\"position:relative;\"><a href=\"#-%EB%AC%B4%ED%95%9C-%EC%8A%A4%ED%81%AC%EB%A1%A4\" aria-label=\" 무한 스크롤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>④ 무한 스크롤</h4>\n<p>페이징 처리를 위해 무한 스크롤을 차용했다.<br>\n빠른 구현 속도를 위해 react-intersection-observer 라이브러리를 사용했고 Inview 컴포넌트를 이용하여 구현했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">inView</span><span class=\"token operator\">:</span> boolean</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>inView <span class=\"token operator\">&amp;&amp;</span> page <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevPage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> prevPage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n<span class=\"token operator\">&lt;</span>InView onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleView<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Box\n    sx<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">\"flex\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">\"50px\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">mt</span><span class=\"token operator\">:</span> <span class=\"token string\">\"20px\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"loading\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>PendingIcon fontSize<span class=\"token operator\">=</span><span class=\"token string\">\"large\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Box<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>InView<span class=\"token operator\">></span></code></pre></div>\n<p>onChange props를 이용하여 inview 여부를 boolean으로 리턴 받아 로직을 구현했다.<br>\nuseInview hooks를 이용하여 구현하는 방법을 나중에 알았는데 추후에 이 방법으로 전환하는 것도 좋을 것 같다고 생각했다.</p>\n<h3 id=\"2-issues\" style=\"position:relative;\"><a href=\"#2-issues\" aria-label=\"2 issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Issues</h3>\n<h4 id=\"-무한-스크롤-1\" style=\"position:relative;\"><a href=\"#-%EB%AC%B4%ED%95%9C-%EC%8A%A4%ED%81%AC%EB%A1%A4-1\" aria-label=\" 무한 스크롤 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① 무한 스크롤</h4>\n<p>무한 스크롤을 구현하다가 초기값이 원하는데로 리턴되지 않는 이슈가 있었다.<br>\n초기 렌더링에 동작하지 않고, 스크롤을 내렸을 때만 inView를 true로 리턴 해주는 것을 기대했는데 초기 렌더링 시에도 true값을 리턴하여 page state를 정상적으로 다루지 못했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isFirstLoad<span class=\"token punctuation\">,</span> setIsFirstLoad<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">inView</span><span class=\"token operator\">:</span> boolean</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 초기 렌더링 시 로직 두번 타는 거 방지</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFirstLoad<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsFirstLoad</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>inView <span class=\"token operator\">&amp;&amp;</span> page <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevPage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> prevPage <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>isFirstLoad라는 state를 만들어서 inView를 리턴받는 함수에 초기 렌더링 시에는 페이징 처리를 하지 않도록 하는 방식으로 해결하였다.</p>\n<hr>","excerpt":"✔ 4주차 회고 4주차에는 영화 페이지를 구현했다. 로그인 시에 메인이 될 화면이고 분류에 맞는 영화를 앨범형 리스트로 만들어야했다. 1. Did  ① API 영화 리스트 렌더링에 필요한 데이터를 위해 API 호출을 해야했다. 호출할 API 주소와 필요한 키 값들을 Config 파일을 따로 만들어 관리하기 용이하게 설정했고 동일한 데이터 응답 시간을 단축하기 위해 React-Query를 사용했다. ② React-Query 단순히 데이터를 캐싱하여 사용하고 설정한 값들의 변경을 감지하여 재요청을 보내는 목적으로 리액트 쿼리를 사용했기 때문에 비교적 간단하게 사용할 수 있었다. useQuery 메소드를 사용하여 키값과 변경을 감지할 변수, 데이터를 요청하여 promise를 리턴 받을 함수, 특정 상황에 따라 사용을 하기 위한 enabled 정도로 가장 일반적인 패턴으로 구현했다. ③ 페이지 레이아웃 및 데이터 렌더링 Mui를 이용하여 리스트 페이지의 레이아웃을 구현했다. 정렬 카테고리…","frontmatter":{"date":"June 27, 2023","title":"팝콘 프로젝트 4주차 회고","categories":"story","author":"이용민"},"fields":{"slug":"/story/project-popcorn-04/"}},"next":{"id":"1f924041-1422-5524-82b9-ea962a818847","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADO0lEQVR42m2QX0xbdRzFTwskDhc0xmy4qHvYoj6Z+YBzGgNhOiFd2eZSaGlvRwYIZvzRWFAEApMNfNhYnApmcwsRtt723pYCjv0xc4xaGoZBcFCgveufS+vcnCYuYbHtr/e7dK/zk5y3k89JDvAYbwBZ+bhp9WfkPqMF1r0LsvQhWdG9kX3ck00/HUHS9/UryV9qa//r3ZTJPsgH7cmHwhU+ymNsfkGn3rChBECeZX3Oe1eAt56ljrPr/tnb3v6vvqNJcXaBlls+SoyU0N8dyFZ0u15UKguf+l9hT+MQ9hGhufvSE3X6E3+e6XSS2HvlU2/LD7hb2mW6V9S0L91z9w/OLQ121v/sOo0EV/glMxbsZcYCMGOBGhXOGA44ojAJEVWVEMnQiWE02mMIiPL+ST54Y1EIvX6qfwZxzed5BKDfHtSPf/cbea1rb9NWPPegrPDNeEPxk8m6IiQqdwIGXkI5f0vFiavgRBmcIL9qFELHtUNL1/L63KvFA/MTB52xOu2g/2luaPk1kyBTlRi5SdebQcvd69MjqR8bkBprUKWsNYDeGlCVnVuB2RHdaBIi33CizAxCjMyiTBwvkZGXiBPCxIlyzGAL+sxihN63/3GU/GVb2EKrX1ls/Z2koy+RdATKSqcKm9tOIbf5ZGa5LTjDiatUzktKo302YRbCTC9Ek2ZbMK63+hWD7VZaSmYhNEX3AZrIyLp9YltOat5SpQQO80rgC5DUpUazh1QWN8FoD42aHTLtt4bjromr5Pv1olLn8FG5LUKG8yvDmoG50gpBshAB5G/awXztlxVfa7/ia/MqCy31iq8NylKbOv2hWm8NgBOjL1eIkajWdpu6HavJ1PQ4nRlxXNvN/3WsZ2w+Z/v3Ms5fdYEWLTuSs5/0pTzVRWyqpoR5qt8hIqwdex7x4WJAN7QE4YKY4Ry3YWG0QzvrHaM51yzdOD0zMD4cgsYqgRu9gwabO4vuAmuTtZvY9QO5qelDYN5asKkapIUPvtqC+IgGMIkRgAimaVJ/do9AE2U7E5fqv42da8ymXh0O855MgxBWuS6exf3JQyrmrkRy8iCY98NM5q5UM0+1Ou7SID6yG4nLpXgIO2TKywhevHIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insight_boy.png\"\n        title=\"\"\n        src=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png\"\n        srcset=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/e9ff0/insight_boy.png 180w,\n/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"-3주차-회고\" style=\"position:relative;\"><a href=\"#-3%EC%A3%BC%EC%B0%A8-%ED%9A%8C%EA%B3%A0\" aria-label=\" 3주차 회고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 3주차 회고</h2>\n<p>3주차에는 간단한 마이페이지를 구현했다.<br>\n이미지 입출력을 구현 해보기 위해 진행했고 Multer 라이브러리를 이용하여 비교적 간단하게 구현하였다.</p>\n<h3 id=\"1-did\" style=\"position:relative;\"><a href=\"#1-did\" aria-label=\"1 did permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Did</h3>\n<h4 id=\"-multer\" style=\"position:relative;\"><a href=\"#-multer\" aria-label=\" multer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① Multer</h4>\n<p>Multer 라이브러리는 파일 업로드를 위해 사용되는 Node.js의 미들웨어이다.<br>\nmultipart/form-data 형식으로 파일 업로드를 지원하기 때문에 header에 Content-Type을 multipart/form-data로 지정하여 FormData를 송신하는 것으로 처리했다.<br>\n단일 파일을 업로드 하는 기능이기 때문에 upload.single(${key}) 를 이용하여 미들웨어를 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>repo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>repo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">recursive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> storage <span class=\"token operator\">=</span> multer<span class=\"token punctuation\">.</span><span class=\"token function\">diskStorage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">destination</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> cb</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> repo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">filename</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> cb</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">.</span>originalname <span class=\"token operator\">+</span> <span class=\"token string\">'-'</span> <span class=\"token operator\">+</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> upload <span class=\"token operator\">=</span> <span class=\"token function\">multer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">storage</span><span class=\"token operator\">:</span> storage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> upload<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Multer를 처음 다루기 때문에 사용법이 미흡했던 점과 repository가 없을 시에는 디렉토리 생성, 파일명 인코딩 등<br>\n미처 생각하지 못했던 부분들을 하나씩 처리하느라 조금 어려움을 겪었지만, 라이브러리 사용법이 간단하여 수월하게 구현한 것 같다.</p>\n<hr>\n<h3 id=\"2-issues\" style=\"position:relative;\"><a href=\"#2-issues\" aria-label=\"2 issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Issues</h3>\n<p>의외로 프론트엔드에서 어려움을 더 겪었다.<br>\nFileReader 객체의 readAsDataURL를 통하여 이미지 데이터를 읽고 데이터를 가공하는 과정에서의 파일명 인코딩 문제에서 어려움을 겪었다.</p>\n<h4 id=\"-인코딩\" style=\"position:relative;\"><a href=\"#-%EC%9D%B8%EC%BD%94%EB%94%A9\" aria-label=\" 인코딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① 인코딩</h4>\n<p>Multer의 로직을 통해 생성된 이미지 파일의 이름이 인코딩이 깨져있는 현상이 발생했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleFileChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> ChangeEvent<span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setAvatarImg</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setImgUrl</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result <span class=\"token keyword\">as</span> string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsDataURL</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>인코딩을 여러곳에서 해주고 있다는 것이 원인이었고 클라이언트의 FileReader.readAsDataURL 에서 base64로 이미 인코딩된 스트링 데이터를 반환한다는 것을 알았다.<br>\n그래서 위와 같이 소스를 수정했고 다른 곳에서도 해주던 인코딩 소스들을 전부 제거하여 해결하였다.</p>\n<hr>","frontmatter":{"date":"June 20, 2023","title":"팝콘 프로젝트 3주차 회고","categories":"story","author":"이용민"},"fields":{"slug":"/story/project-popcorn-03/"}},"prev":{"id":"f4a162bf-6e33-5da8-8d89-9c3257c5a9fc","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADO0lEQVR42m2QX0xbdRzFTwskDhc0xmy4qHvYoj6Z+YBzGgNhOiFd2eZSaGlvRwYIZvzRWFAEApMNfNhYnApmcwsRtt723pYCjv0xc4xaGoZBcFCgveufS+vcnCYuYbHtr/e7dK/zk5y3k89JDvAYbwBZ+bhp9WfkPqMF1r0LsvQhWdG9kX3ck00/HUHS9/UryV9qa//r3ZTJPsgH7cmHwhU+ymNsfkGn3rChBECeZX3Oe1eAt56ljrPr/tnb3v6vvqNJcXaBlls+SoyU0N8dyFZ0u15UKguf+l9hT+MQ9hGhufvSE3X6E3+e6XSS2HvlU2/LD7hb2mW6V9S0L91z9w/OLQ121v/sOo0EV/glMxbsZcYCMGOBGhXOGA44ojAJEVWVEMnQiWE02mMIiPL+ST54Y1EIvX6qfwZxzed5BKDfHtSPf/cbea1rb9NWPPegrPDNeEPxk8m6IiQqdwIGXkI5f0vFiavgRBmcIL9qFELHtUNL1/L63KvFA/MTB52xOu2g/2luaPk1kyBTlRi5SdebQcvd69MjqR8bkBprUKWsNYDeGlCVnVuB2RHdaBIi33CizAxCjMyiTBwvkZGXiBPCxIlyzGAL+sxihN63/3GU/GVb2EKrX1ls/Z2koy+RdATKSqcKm9tOIbf5ZGa5LTjDiatUzktKo302YRbCTC9Ek2ZbMK63+hWD7VZaSmYhNEX3AZrIyLp9YltOat5SpQQO80rgC5DUpUazh1QWN8FoD42aHTLtt4bjromr5Pv1olLn8FG5LUKG8yvDmoG50gpBshAB5G/awXztlxVfa7/ia/MqCy31iq8NylKbOv2hWm8NgBOjL1eIkajWdpu6HavJ1PQ4nRlxXNvN/3WsZ2w+Z/v3Ms5fdYEWLTuSs5/0pTzVRWyqpoR5qt8hIqwdex7x4WJAN7QE4YKY4Ry3YWG0QzvrHaM51yzdOD0zMD4cgsYqgRu9gwabO4vuAmuTtZvY9QO5qelDYN5asKkapIUPvtqC+IgGMIkRgAimaVJ/do9AE2U7E5fqv42da8ymXh0O855MgxBWuS6exf3JQyrmrkRy8iCY98NM5q5UM0+1Ou7SID6yG4nLpXgIO2TKywhevHIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"insight_boy.png\"\n        title=\"\"\n        src=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png\"\n        srcset=\"/static/92ca0eb61e27f0b7100f52d03b1702ae/e9ff0/insight_boy.png 180w,\n/static/92ca0eb61e27f0b7100f52d03b1702ae/6f3f2/insight_boy.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"-56주차-회고\" style=\"position:relative;\"><a href=\"#-56%EC%A3%BC%EC%B0%A8-%ED%9A%8C%EA%B3%A0\" aria-label=\" 56주차 회고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✔ 5,6주차 회고</h2>\n<p>회사에서 진행하던 프로젝트가 막바지 단계여서 야근이 잦아졌다.<br>\n프로젝트에 많은 시간 투자를 하지 못해서 아쉬웠다.<br>\n5,6 주차에는 헤더의 검색 창을 통한 영화 검색 기능, 검색 페이지를 구현했다.</p>\n<h3 id=\"1-did\" style=\"position:relative;\"><a href=\"#1-did\" aria-label=\"1 did permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Did</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADyklEQVR42p2UbVBUZRTH78e+NWMzqYkTWYiiFgNpJGnFS6yIYbwEuYw6QKtFMZCIL8Wb4KhhrEaRucNGq0VZOCyg05SyoI6ijmagLM5oNmUpTLDv99699+7+mr3Wh/pUnZkzz/+8/M/znJnnHEGSFVxeP5NuLx5fgKCi/muVgwohTeXulMx228+cvupGcLm9jE/8jj8gIkry/9KAKOP2SfgCMsKky83t3+7qgb9u/a8a4SmKQjCoICiqhqaFkYPqPxJUFPXv7UVs5U9bkoNEuJIUxOXx4RdlPUfQCZqKGtIIhUNoWoigohCQVTy+IFLwXgFFDemtiXLEpxAKgxhU8IgyXq8Xv8+j8wRZlFDcIp4piYkJL5oS4khfP3t2NjByfC81jbvp6P6OHy4OYSzIJzcrE2NBAd1He7A17aLaWEShaSc5axv55tvTCCc6RqhOO8Seml6MeW3kG/bz/aVznOlt5faQma9tH3BlZJSGTWUUPJ/E6ytTWTo3mm1V29n3iglrdh0Lc44jLHufD60OhDOWUSzpLVxpt3Ni8xEsae/i+mWYAw3VVOauwNn/FcHJn9iwrghD4gKKX1hOQvRMdu1u4Y1mO2WZTZQaO5lT3Mhnl8YRPH0XceRV0b3RxOXaZu4cbGfYYcdUkM2anAzWv5ROa3MN9eUbyF6ygJLMFAxPxmHetZcVvS6SyvdTVNJEgvkcnRcmEO4ODVO6soStRQUY0kqwt73HUWsLzyU/zaLHFzHtgWlUVZqofWsTT8xbSIohj4zkZ6irqialvI/FxRbic1uYbviYw539CA5rN/lxyZTnvUjMw6nUZ1XS9M4WZs2czvx5McQ+Fk35xlK2bt2BYdV6Xn6tntTsYurrdnJsy2pK01eTnW6kPO1ZzvZ0Idy69StNTc28+WoZO+rMXLg8RsWWCmJio1i6LJH4xPnk5+dQu7mSnKw1bNu2l6zctVS+XYOtIo3cpNnkLI+jOutRzh7rQtBCITRV486dCfw+HxEprTCxJCGadXkpPBU/h1WrMiksNDJjxixi5y7koahHMJnKyEhdTkLM/aQunk3Ug/dx2Hbo3seWZBlJkvRJiIhjcABz634+6ejgoMWCY2AAu70Hs3kfbR8doL3dyqlTp/niyy7a2ixYrR18avscp/M6QmSUJien8PkDjI6OMnb9ul5UlhX9vHHjBlNTLh1HciNy9do1RFHSsaqqhMNhxsacqJp274UBUdSDTqeTkZGrhAG3x0MoFGbo/Hlu3vxRH0mPx6v7BgYHGR+f0JeB3x9AFEVOnuzX8R/D4N9hKiiGqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"검색헤더.png\"\n        title=\"\"\n        src=\"/static/394873dfdcd4dbad425cac68773768c8/37523/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png\"\n        srcset=\"/static/394873dfdcd4dbad425cac68773768c8/e9ff0/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 180w,\n/static/394873dfdcd4dbad425cac68773768c8/f21e7/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 360w,\n/static/394873dfdcd4dbad425cac68773768c8/37523/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 720w,\n/static/394873dfdcd4dbad425cac68773768c8/302a4/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 1080w,\n/static/394873dfdcd4dbad425cac68773768c8/07a9c/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 1440w,\n/static/394873dfdcd4dbad425cac68773768c8/58a91/%EA%B2%80%EC%83%89%ED%97%A4%EB%8D%94.png 1990w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h4 id=\"-헤더를-통한-검색\" style=\"position:relative;\"><a href=\"#-%ED%97%A4%EB%8D%94%EB%A5%BC-%ED%86%B5%ED%95%9C-%EA%B2%80%EC%83%89\" aria-label=\" 헤더를 통한 검색 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① 헤더를 통한 검색</h4>\n<p>템플릿을 참고하여 헤더의 돋보기 아이콘 클릭 시 검색 레이어가 출력되게 구현했고 검색 시 Search 메뉴로 이동하면서 검색 결과를 앨범 리스트로 출력 해주도록 구현했다.</p>\n<h4 id=\"-메뉴를-통한-검색\" style=\"position:relative;\"><a href=\"#-%EB%A9%94%EB%89%B4%EB%A5%BC-%ED%86%B5%ED%95%9C-%EA%B2%80%EC%83%89\" aria-label=\" 메뉴를 통한 검색 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>② 메뉴를 통한 검색</h4>\n<p>Search 메뉴를 통해 들어와 검색을 했을 때 검색 결과를 앨범 리스트로 출력 해주도록 구현했다.</p>\n<h4 id=\"-검색-기능\" style=\"position:relative;\"><a href=\"#-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5\" aria-label=\" 검색 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>③ 검색 기능</h4>\n<p>API에 검색어를 파라미터로 설정하여 요청을 하면 검색 결과를 제공해주는 기능이 있어서 React-Query를 통해 검색어가 변경되면 요청을 보내는 방식으로 구현했다.</p>\n<h3 id=\"2-issues\" style=\"position:relative;\"><a href=\"#2-issues\" aria-label=\"2 issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Issues</h3>\n<h4 id=\"-동일-컴포넌트-사용\" style=\"position:relative;\"><a href=\"#-%EB%8F%99%EC%9D%BC-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%82%AC%EC%9A%A9\" aria-label=\" 동일 컴포넌트 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>① 동일 컴포넌트 사용</h4>\n<p>동일 컴포넌트로 헤더를 통한 검색, 메뉴를 통한 검색에 따른 결과를 출력 해주다보니 디테일한 부분들을 신경써야했다.</p>\n<ol>\n<li>상단 검색바를 통해 검색한 경우</li>\n</ol>\n<p>1-1. 검색 했을 때 Search 메뉴의 검색바에 값이 들어있어야함<br>\n1-2. Search 메뉴의 검색바로 다시 검색하면 state 초기화 되어야함<br>\n2. Search 메뉴의 검색바를 통해 검색한 경우<br>\n2-1. Search 메뉴를 클릭했을 때 모든 state가 초기화 되어야함<br>\n2-2. 기존과 다른 키워드로 검색한 경우 리스트 초기화 되어야함<br>\n2-3. 빈 값을 검색하면 request 요청 보내지 않아야함</p>\n<p>정도로 신경써야할 케이스를 리스트업을 했고 각 케이스의 로직을 처리했다.<br>\n그 결과, 기능적으로는 정상동작 했지만 한 컴포넌트에서 다뤄야할 state가 많아졌고 코드가 지저분해졌다.<br>\n추후에 리펙토링을 진행하면 관심사를 분리하여 컴포넌트를 좀 더 잘게 쪼개야겠다는 생각을 했다.</p>\n<h4 id=\"-useeffect\" style=\"position:relative;\"><a href=\"#-useeffect\" aria-label=\" useeffect permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>② useEffect</h4>\n<p>useQuery를 통해 받아온 data가 갱신 될 때 마다 state를 변경되게 하는 로직을 짜야했고 useEffect를 사용해야겠다는 생각을 해 두번째 아규먼트로 [data]를 주어서 구현을 했었다.<br>\n컴포너트의 로직이 간단할 때는 정상적으로 동작했지만, 여러 컴포넌트와 유기적으로 동작하게 됐을 때 문제가 발생했다.<br>\n렌더링 후에 동작하는 useEffect의 특성 때문에 로직이 처리되어야할 순서가 꼬여버렸다.<br>\n선행되어야할 로직이 실행되기 전에 다른 로직이 실행되었고 원하는대로 동작하지 않았다.<br>\n방법을 찾던 도중, useQuery 함수의 세번째 아규먼트에 onSuccess를 사용하면 status, data를 객체로 받아서 처리할 필요 없이 요청 성공 시 로직을 바로 실행시킬 수 있다는 것을 알게되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> status <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"movieData\"</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getMovieData</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setMovies</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevMovie</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>prevMovie<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>data<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      enabled<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>의 형태로 로직을 변경했고 원하는대로 정상동작 하게 되었다.<br>\n공식문서를 참고해서 onSuccess의 존재를 알았으면 조금 더 빨리 해결할 수 있지 않았을까 라는 생각이 들었고 공식문서를 보는 습관을 들여야겠다는 생각을 했다.</p>\n<hr>","frontmatter":{"date":"July 11, 2023","title":"팝콘 프로젝트 5, 6주차 회고","categories":"story","author":"이용민"},"fields":{"slug":"/story/project-popcorn-05/"}},"site":{"siteMetadata":{"siteUrl":"https://slowteady.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/story/project-popcorn-04/","nextSlug":"/story/project-popcorn-03/","prevSlug":"/story/project-popcorn-05/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"],"slicesMap":{}}